<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Physical Function Form</title>
  <link rel="stylesheet" href="<%= basePath %>/styles/physical.css">
  <!-- <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'> -->
  <link rel="stylesheet" href="<%= basePath %>/assets/icons/boxicons/css/boxicons.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

</head>
<body>
  <button class="lang-toggle" onclick="toggleLanguage()">العربية</button>
        
<div class="parentrow">
    
  <div class="parentcolumn left">

    <div class="sidebar">
      <hr class="spacer">
      <img src="<%= basePath %>/assets/images/logo.png">
      <hr class="spacer">
      <% surveyStatus.forEach(survey => { %>
        <div class="<%= survey.active ? 'sidebar-item-active' 
                        : (survey.completed ? 'sidebar-item-done' 
                                            : 'sidebar-item-inactive') %>">
          <%= survey.name %>
        </div>
      <% }) %>
      <!-- <div class="sidebar-item-inactive">PAID</div> -->
      
      <!-- <div class="legend">
        <h2 data-en="Notes :" data-ar="ملاحظات :">Notes :</h2>
<ul>
          <li data-en="0 = Perfect continence" data-ar="0 = سلس مثالي">1 = Excellent</li>
          <li data-en="1 = Rarely: Less than 1/month" data-ar="1 = نادرا: أقل من 1/شهر">2 = very good</li>
          <li data-en="2 = Sometimes: Less than 1/week, but at least 1/month" data-ar="2 = أحيانا: أقل من 1/أسبوع، ولكن على الأقل 1/شهر">3 = Good</li>
          <li data-en="3 = Usually: Less than 1/day, but at least 1/week" data-ar="3 = عادة: أقل من 1/يوم، ولكن على الأقل 1/أسبوع">4 = Fair</li>
          <li data-en="4 = Always: At least 1/day" data-ar="4 = دائما: على الأقل 1/يوم">5 = Poor</li>
</ul>
      </div> -->

    </div>
      
  </div>

  <div class="parentcolumn right">
    <div class="infobox">

      <div class="mobile-container">

        <img src="<%= basePath %>/assets/images/logo.png">

        
      </div>




  <h1 data-en="Physical Function" data-ar="تدخل الألم">Physical Function</h1>
  <p id="text" class="info-text"
  data-en="PROMIS Physical Function instruments measure self-reported capability rather than actual performance of physical activities. This includes the functioning of one’s upper extremities (dexterity), lower extremities (walking or mobility), and central regions (neck, back), as well as instrumental activities of daily living, such as running errands."
  data-ar="تقوم أدوات الوظيفة البدنية PROMIS بقياس القدرة المبلغ عنها ذاتيًا بدلاً من الأداء الفعلي للأنشطة البدنية. يتضمن ذلك أداء الأطراف العلوية (البراعة)، والأطراف السفلية (المشي أو الحركة)، والمناطق المركزية (الرقبة والظهر)، بالإضافة إلى الأنشطة الأساسية للحياة اليومية، مثل أداء المهمات.">
  <span id="dots" style="display:none;">...</span>
    <span id="more-text" style="display:none;"></span>
    <span id="toggle-btn" onclick="toggleText()" style="color: blue; cursor: pointer; display:none;"> Show More</span>
  </p>
  
  
  
  
  
  
  
  
  
  
  <hr class="spacer">
  <!-- Progress Bar -->
  <div class="progress-bar">
    <div class="progress" id="progress-bar"></div>
  </div>

  <form action="<%= basePath %>/submitPHYSICAL-6b" method="POST" class="surveyform">
    <input type="hidden" name="Mr_no" value="<%= Mr_no %>">
    <input type="hidden" name="lang" value="<%= currentLang %>"> <!-- This is the added hidden field -->


    <!-- Questions -->
    <div class="question-container active" id="question-1">
      <div class="back-button-first-question">
        <button type="button" onclick="previousQuestion()" style="display:none;"><i class='bx bx-chevrons-left'></i>Previous</button>
      </div>
      <p class="question-text" data-en="Are you able to do chores such as vacuuming or yard work?" data-ar="هل بمقدورك القيام بالأعمال المنزلية مثل التنظيف بالمكنسة الكهربائية أو أعمال الحديقة؟">Are you able to do chores such as vacuuming or yard work?</p><br>

      <div id="form-wrapper">
        <div class="responsive-grid-radio">
            <div class="radio-grid">
                <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY1" value="5" required>
                <label for="PHSY1" data-en="Without any difficulty" data-ar="دون أيّة صعوبة">Without any difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY2" value="4" required>
                <label for="PHSY2" data-en="With a little difficulty" data-ar="مرات قليلة">With a little difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY3" value="3" required>
                <label for="PHSY3" data-en="With some difficulty" data-ar="مع بعض الصعوبة">With some difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY4" value="2" required>
                <label for="PHSY4" data-en="With much difficulty" data-ar="بصعوبةٍ كبيرة">With much difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY5" value="1" required>
                <label for="PHSY5" data-en="Unable to do" data-ar="ليس بمقدوري القيام بذلك">Unable to do</label>
            </div>
        </div>
      </div>
      
      <!-- <div id="custom-radio-pos"></div> -->
      <div id="form-wrapper-desktop">
        <div id="custom-radio">
      <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY6" value="5" required>
      <label for="PHSY6" data-en="Without any difficulty" data-ar="دون أيّة صعوبة" >Without any difficulty</label> 
      <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY7" value="4" required>
      <label for="PHSY7" data-en="With a little difficulty" data-ar="مرات قليلة">With a little difficulty</label>
      <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY8" value="3" required>
      <label for="PHSY8" data-en="With some difficulty" data-ar="مع بعض الصعوبة">With some difficulty</label>
      <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY9" value="2" required>
      <label for="PHSY9" data-en="With much difficulty" data-ar="بصعوبةٍ كبيرة">With much difficulty</label>
      <input type="radio" name="Are you able to do chores such as vacuuming or yard work?" id="PHSY10" value="1" required>
      <label for="PHSY10" data-en="Unable to do" data-ar="ليس بمقدوري القيام بذلك">Unable to do</label>     
<div id="custom-radio-pos"></div>
      </div>

    </div>
    </div>

    <div class="question-container" id="question-2">
      <div class="back-button">
        <button type="button" data-en="<= Previous" data-ar="<= سابق" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i><= Previous</button>
      </div>
      <p data-en="Are you able to go up and down stairs at a normal pace?" data-ar="هل بمقدورك صعود السلالم ونزولها بالسرعة العادية؟">Are you able to go up and down stairs at a normal pace?</p><br>

      <div id="form-wrapper">
        <div class="responsive-grid-radio">
            <div class="radio-grid">
                <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_1" value="5" required>
                <label for="PHSY1_1" data-en="Without any difficulty" data-ar="دون أيّة صعوبة">Without any difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_2" value="4" required>
                <label for="PHSY1_2" data-en="With a little difficulty" data-ar="مرات قليلة">With a little difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_3" value="3" required>
                <label for="PHSY1_3" data-en="With some difficulty" data-ar="مع بعض الصعوبة">With some difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_4" value="2" required>
                <label for="PHSY1_4" data-en="With much difficulty" data-ar="بصعوبةٍ كبيرة">With much difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_5" value="1" required>
                <label for="PHSY1_5" data-en="Unable to do" data-ar="ليس بمقدوري القيام بذلك">Unable to do</label>
            </div>
        </div>
      </div>

      <!-- <div id="custom-radio-pos"></div> -->
      <div id="form-wrapper-desktop">
        <div id="custom-radio">
          <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_6" value="5" required>
          <label for="PHSY1_6" data-en="Without any difficulty" data-ar="دون أيّة صعوبة">Without any difficulty</label> 
          <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_7" value="4" required>
          <label for="PHSY1_7" data-en="With a little difficulty" data-ar="مرات قليلة">With a little difficulty</label>
          <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_8" value="3" required>
          <label for="PHSY1_8" data-en="With some difficulty" data-ar="مع بعض الصعوبة">With some difficulty</label>
          <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_9" value="2" required>
          <label for="PHSY1_9" data-en="With much difficulty" data-ar="بصعوبةٍ كبيرة">With much difficulty</label>
          <input type="radio" name="Are you able to go up and down stairs at a normal pace?" id="PHSY1_0" value="1" required>
          <label for="PHSY1_0" data-en="Unable to do" data-ar="ليس بمقدوري القيام بذلك">Unable to do</label>     
<div id="custom-radio-pos"></div>
      </div>

    </div>
    </div>


    <div class="question-container" id="question-3">
      <div class="back-button">
        <button type="button" data-en="<= Previous" data-ar="<= سابق" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i><= Previous</button>
      </div>
      <p data-en="Are you able to go for a walk of at least 15 minutes?" data-ar="هل بمقدورك أن تتمشى لمدة 15 دقيقة على الأقل؟">Are you able to go for a walk of at least 15 minutes?</p><br>

      <div id="form-wrapper">
        <div class="responsive-grid-radio">
            <div class="radio-grid">
                <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_1" value="5" required>
                <label for="PHSY2_1" data-en="Without any difficulty" data-ar="دون أيّة صعوبة">Without any difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_2" value="4" required>
                <label for="PHSY2_2" data-en="With a little difficulty" data-ar="مرات قليلة">With a little difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_3" value="3" required>
                <label for="PHSY2_3" data-en="With some difficulty" data-ar="مع بعض الصعوبة">With some difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_4" value="2" required>
                <label for="PHSY2_4" data-en="With much difficulty" data-ar="بصعوبةٍ كبيرة">With much difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_5" value="1" required>
                <label for="PHSY2_5" data-en="Unable to do" data-ar="ليس بمقدوري القيام بذلك">Unable to do</label>
            </div>
        </div>
      </div>


      <!-- <div id="custom-radio-pos"></div> -->
      <div id="form-wrapper-desktop">
        <div id="custom-radio">
      <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_6" value="5" required>
      <label for="PHSY2_6" data-en="Without any difficulty" data-ar="دون أيّة صعوبة">Without any difficulty</label> 
      <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_7" value="4" required>
      <label for="PHSY2_7" data-en="With a little difficulty" data-ar="مرات قليلة">With a little difficulty</label>
      <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_8" value="3" required>
      <label for="PHSY2_8" data-en="With some difficulty" data-ar="مع بعض الصعوبة">With some difficulty</label>
      <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_9" value="2" required>
      <label for="PHSY2_9" data-en="With much difficulty" data-ar="بصعوبةٍ كبيرة">With much difficulty</label>
      <input type="radio" name="Are you able to go for a walk of at least 15 minutes?" id="PHSY2_0" value="1" required>
      <label for="PHSY2_0" data-en="Unable to do" data-ar="ليس بمقدوري القيام بذلك">Unable to do</label>     
<div id="custom-radio-pos"></div>
      </div>

    </div>
    </div>


    

   
    <div class="question-container" id="question-4">
      <div class="back-button">
        <button type="button" data-en="<= Previous" data-ar="<= سابق" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i><= Previous</button>
      </div>
      <p data-en="Are you able to run errands and shop?" data-ar="هل بمقدورك الخروج للقيام ببعض المهام أوالتسوق؟">Are you able to run errands and shop?</p><br>

      <div id="form-wrapper">
        <div class="responsive-grid-radio">
            <div class="radio-grid">
                <input type="radio" name="Are you able to run errands and shop?" id="PHS_1" value="5" required>
                <label for="PHS_1" data-en="Without any difficulty" data-ar="دون أيّة صعوبة">Without any difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to run errands and shop?" id="PHS_2" value="4" required>
                <label for="PHS_2" data-en="With a little difficulty" data-ar="مرات قليلة">With a little difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to run errands and shop?" id="PHS_3" value="3" required>
                <label for="PHS_3" data-en="With some difficulty" data-ar="مع بعض الصعوبة">With some difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to run errands and shop?" id="PHS_4" value="2" required>
                <label for="PHS_4" data-en="With much difficulty" data-ar="بصعوبةٍ كبيرة">With much difficulty</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Are you able to run errands and shop?" id="PHS_5" value="1" required>
                <label for="PHS_5" data-en="Unable to do" data-ar="ليس بمقدوري القيام بذلك">Unable to do</label>
            </div>
        </div>
      </div>



      <div id="form-wrapper-desktop">
        <div id="custom-radio">
      <input type="radio" name="Are you able to run errands and shop?" id="PHS_6" value="5" required>
      <label for="PHS_6" data-en="Without any difficulty" data-ar="دون أيّة صعوبة">Without any difficulty</label> 
      <input type="radio" name="Are you able to run errands and shop?" id="PHS_7" value="4" required>
      <label for="PHS_7" data-en="With a little difficulty" data-ar="مرات قليلة">With a little difficulty</label>
      <input type="radio" name="Are you able to run errands and shop?" id="PHS_8" value="3" required>
      <label for="PHS_8" data-en="With some difficulty" data-ar="مع بعض الصعوبة">With some difficulty</label>
      <input type="radio" name="Are you able to run errands and shop?" id="PHS_9" value="2" required>
      <label for="PHS_9" data-en="With much difficulty" data-ar="بصعوبةٍ كبيرة">With much difficulty</label>
      <input type="radio" name="Are you able to run errands and shop?" id="PHS_0" value="1" required>
      <label for="PHS_0" data-en="Unable to do" data-ar="ليس بمقدوري القيام بذلك">Unable to do</label>     
<div id="custom-radio-pos"></div>
      </div>

    </div>
    </div>


    <div class="question-container" id="question-5">
      <div class="back-button">
        <button type="button" data-en="<= Previous" data-ar="<= سابق" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i><= Previous</button>
      </div>
      <p data-en="Does your health now limit you in doing two hours of physical labor?" data-ar="هل تحدّ صحّتك الآن من قدرتك على القيام بعمل بدني لمدّة ساعتين؟">Does your health now limit you in doing two hours of physical labor?</p><br>      

      <div id="form-wrapper">
        <div class="responsive-grid-radio">
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_1" value="5" required>
                <label for="PSHY4_1" data-en="Not at all" data-ar="كلاّ إطلاقا">Not at all</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_2" value="4" required>
                <label for="PSHY4_2" data-en="Very little" data-ar="قليلاً جداً">Very little</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_3" value="3" required>
                <label for="PSHY4_3" data-en="Somewhat" data-ar="بعض الشيء">Somewhat</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_4" value="2" required>
                <label for="PSHY4_4" data-en="Quite a lot" data-ar="كثيراً جداً">Quite a lot</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_5" value="1" required>
                <label for="PSHY4_5" data-en="Cannot do" data-ar="ليس بمقدوري القيام بذلك">Cannot do</label>
            </div>
        </div>
      </div>

      <div id="form-wrapper-desktop">
        <div id="custom-radio">
      <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_6" value="5" required>
      <label for="PSHY4_6" data-en="Not at all" data-ar="كلاّ إطلاقا">Not at all</label> 
      <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_7" value="4" required>
      <label for="PSHY4_7" data-en="Very little" data-ar="قليلاً جداً">Very little</label>
      <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_8" value="3" required>
      <label for="PSHY4_8" data-en="Somewhat" data-ar="بعض الشيء">Somewhat</label>
      <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_9" value="2" required>
      <label for="PSHY4_9" data-en="Quite a lot" data-ar="كثيراً جداً">Quite a lot</label>
      <input type="radio" name="Does your health now limit you in doing two hours of physical labor?" id="PSHY4_0" value="1" required>
      <label for="PSHY4_0" data-en="Cannot do" data-ar="ليس بمقدوري القيام بذلك">Cannot do</label>     
<div id="custom-radio-pos"></div>
      </div>

    </div>
    </div>


    <div class="question-container" id="question-6">
      <div class="back-button">
        <button type="button" data-en="<= Previous" data-ar="<= سابق" onclick="previousQuestion()"><i class='bx bx-chevrons-left'></i><= Previous</button>
      </div>
      <p data-en="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" data-ar="هل تحدُّ صحتك الآن من قدرتك على القيام بأعمال تتطلب جهداً متوسطاً في المنزل، مثل التنظيف بالمكنسة الكهربائية، أو كنس الأرضيّات، أو حمل مواد البقالة؟">Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?</p><br>

      <div id="form-wrapper">
        <div class="responsive-grid-radio">
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PSHY5_1" value="5" required>
                <label for="PSHY5_1" data-en="Not at all" data-ar="كلاّ إطلاقا">Not at all</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PSHY5_2" value="4" required>
                <label for="PSHY5_2" data-en="Very little" data-ar="قليلاً جداً">Very little</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PSHY5_3" value="3" required>
                <label for="PSHY5_3" data-en="Somewhat" data-ar="بعض الشيء">Somewhat</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PSHY5_4" value="2" required>
                <label for="PSHY5_4" data-en="Quite a lot" data-ar="كثيراً جداً">Quite a lot</label>
            </div>
            <div class="radio-grid">
                <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PSHY5_5" value="1" required>
                <label for="PSHY5_5" data-en="Cannot do" data-ar="ليس بمقدوري القيام بذلك">Cannot do</label>
            </div>
        </div>
      </div>



      <div id="form-wrapper-desktop">
        <div id="custom-radio">
      <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PHSY_6" value="5" required>
      <label for="PHSY_6" data-en="Not at all" data-ar="كلاّ إطلاقا">Not at all</label> 
      <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PHSY_7" value="4" required>
      <label for="PHSY_7" data-en="Very little" data-ar="قليلاً جداً">Very little</label>
      <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PHSY_8" value="3" required>
      <label for="PHSY_8" data-en="Somewhat" data-ar="بعض الشيء">Somewhat</label>
      <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PHSY_9" value="2" required>
      <label for="PHSY_9" data-en="Quite a lot" data-ar="كثيراً جداً">Quite a lot</label>
      <input type="radio" name="Does your health now limit you in doing moderate work around the house like vacuuming, sweeping floors or carrying in groceries?" id="PHSY_0" value="1" required>
      <label for="PHSY_0" data-en="Cannot do" data-ar="ليس بمقدوري القيام بذلك">Cannot do</label>     
<div id="custom-radio-pos"></div>
      </div>

    </div>

    <div class="nav-buttons">
        <button data-en="Submit" data-ar="إرسال" type="submit">
          <i class='bx bx-check-double'></i> Submit
        </button>
      </div>
    </div>

    
  </form>

  <!-- <script>
    let currentLang = 'en';
    let currentQuestion = 0;
    const questions = document.querySelectorAll('.question-container');
    const progressBar = document.getElementById('progress-bar');

    function updateProgressBar() {
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        progressBar.style.width = `${progress}%`;
    }

    function showQuestion(index) {
        questions.forEach((question, i) => {
            question.classList.toggle('active', i === index);
        });
        updateProgressBar();
    }

    // Function to toggle between "Show More" and "Show Less"
    // Character limit for truncation
// Character limit for truncation on mobile
var charLimit = 80;

function toggleText() {
  var dots = document.getElementById("dots");
  var moreText = document.getElementById("more-text");
  var toggleBtn = document.getElementById("toggle-btn");

  if (moreText.style.display === "none") {
    dots.style.display = "none"; // Hide the dots
    moreText.style.display = "inline"; // Show the extra text
    toggleBtn.innerHTML = " Show Less"; // Change text to "Show Less"
  } else {
    dots.style.display = "inline"; // Show the dots
    moreText.style.display = "none"; // Hide the extra text
    toggleBtn.innerHTML = " Show More"; // Change text back to "Show More"
  }
}

// Function to handle truncation based on screen size (mobile vs desktop)
function setInitialText() {
  var fullText = "PROMIS-10 Global Health is a brief survey that assesses your overall health across physical, mental, and social aspects. It's a quick way to track your health over time and helps doctors understand your concerns from your perspective."; 
  var truncatedText = fullText.substring(0, charLimit); // Get the first 100 characters

  // Check if the screen size is mobile
  if (window.innerWidth < 768) {
    // On mobile, truncate the text if it exceeds the character limit
    if (fullText.length > charLimit) {
      document.getElementById("text").innerHTML = 
        truncatedText + 
        '<span id="dots">...</span>' +
        '<span id="more-text" style="display:none;">' + 
        fullText.substring(charLimit) + 
        '</span>' + 
        '<span id="toggle-btn" style="color: blue; cursor: pointer;" onclick="toggleText()"> Show More</span>';
    } else {
      // If text is within the character limit, show the full text
      document.getElementById("text").innerHTML = fullText;
    }
  } else {
    // On desktop, show the full text without truncation and without "Show More"
    document.getElementById("text").innerHTML = fullText;
  }
}

// Call setInitialText on page load and when the window is resized
window.onload = setInitialText;
window.onresize = setInitialText;



    function nextQuestion() {
        const currentInputs = questions[currentQuestion].querySelectorAll('input[type="radio"]');
        let answered = false;

        currentInputs.forEach(input => {
            if (input.checked) {
                answered = true;
            }
        });

        if (answered) {
            if (currentQuestion < questions.length - 1) {
              setTimeout(() => {
                currentQuestion++;
                showQuestion(currentQuestion)
              }, 500);
            }
                
        }
    }

    document.querySelectorAll('.radio-grid').forEach(function (grid) {
        grid.addEventListener('click', function () {
            // Find the label element within this grid and simulate a click on it
            const label = this.querySelector('label');
            if (label) {
                label.click();  // Simulate a click on the label
            }
        });
    });


    function previousQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            showQuestion(currentQuestion);

            addRadioEventListeners();
        }
    }

    function addRadioEventListeners() {
  questions.forEach((question, questionIndex) => {
    const radioInputs = question.querySelectorAll('input[type="radio"]');

    radioInputs.forEach(input => {
      // Remove any existing event listener before adding a new one to avoid multiple triggers
      input.removeEventListener('click', handleRadioClick);
      input.addEventListener('click', handleRadioClick);
    });
  });
}

function handleRadioClick() {
  if (currentQuestion === questions.length - 1) {
    return; // Do nothing if we are on the last question
  }
  nextQuestion();
}

    function toggleLanguage() {
        currentLang = currentLang === 'en' ? 'ar' : 'en';
        document.querySelectorAll('[data-en]').forEach(el => {
            el.innerText = el.getAttribute(`data-${currentLang}`);
        });
        document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';
    }

    showQuestion(0);
    addRadioEventListeners();
</script> -->

<!-- <script>
  let currentLang = 'en'; // Default language
  let currentQuestion = 0;
  const questions = document.querySelectorAll('.question-container');
  const progressBar = document.getElementById('progress-bar');

  // Update progress bar based on the current question
  function updateProgressBar() {
    const progress = ((currentQuestion + 1) / questions.length) * 100;
    progressBar.style.width = `${progress}%`;
  }

  // Show a specific question
  function showQuestion(index) {
    questions.forEach((question, i) => {
      question.classList.toggle('active', i === index);
    });
    updateProgressBar();
  }

  // Function to toggle between "Show More" and "Show Less"
  var charLimit = 80;

  function toggleText() {
    var dots = document.getElementById("dots");
    var moreText = document.getElementById("more-text");
    var toggleBtn = document.getElementById("toggle-btn");

    if (moreText.style.display === "none") {
      dots.style.display = "none"; // Hide the dots
      moreText.style.display = "inline"; // Show the extra text
      toggleBtn.innerHTML = " Show Less"; // Change text to "Show Less"
    } else {
      dots.style.display = "inline"; // Show the dots
      moreText.style.display = "none"; // Hide the extra text
      toggleBtn.innerHTML = " Show More"; // Change text back to "Show More"
    }
  }

  // Function to handle truncation based on screen size (mobile vs desktop)
  function setInitialText() {
    var fullText = "PROMIS-10 Global Health is a brief survey that assesses your overall health across physical, mental, and social aspects. It's a quick way to track your health over time and helps doctors understand your concerns from your perspective."; 
    var truncatedText = fullText.substring(0, charLimit); // Truncate the text

    if (window.innerWidth < 768) {
      if (fullText.length > charLimit) {
        document.getElementById("text").innerHTML =
          truncatedText +
          '<span id="dots">...</span>' +
          '<span id="more-text" style="display:none;">' +
          fullText.substring(charLimit) +
          '</span>' +
          '<span id="toggle-btn" style="color: blue; cursor: pointer;" onclick="toggleText()"> Show More</span>';
      } else {
        document.getElementById("text").innerHTML = fullText;
      }
    } else {
      document.getElementById("text").innerHTML = fullText;
    }
  }

  // Call setInitialText on page load and when the window is resized
  window.onload = setInitialText;
  window.onresize = setInitialText;

  // Handle going to the next question
  function nextQuestion() {
    const currentInputs = questions[currentQuestion].querySelectorAll('input[type="radio"]');
    let answered = false;

    currentInputs.forEach(input => {
      if (input.checked) {
        answered = true;
      }
    });

    if (answered) {
      if (currentQuestion < questions.length - 1) {
        setTimeout(() => {
          currentQuestion++;
          showQuestion(currentQuestion);
        }, 500);
      }
    }
  }

  // Handle going to the previous question
  function previousQuestion() {
    if (currentQuestion > 0) {
      currentQuestion--;
      showQuestion(currentQuestion);
      addRadioEventListeners();
    }
  }

  // Add event listeners for radio buttons to move to the next question
  function addRadioEventListeners() {
    questions.forEach((question, questionIndex) => {
      const radioInputs = question.querySelectorAll('input[type="radio"]');
  
      radioInputs.forEach(input => {
        // Remove any existing event listener before adding a new one to avoid multiple triggers
        input.removeEventListener('click', handleRadioClick);
        input.addEventListener('click', handleRadioClick);
      });
    });
  }
  
  function handleRadioClick() {
    if (currentQuestion === questions.length - 1) {
      return; // Do nothing if we are on the last question
    }
    nextQuestion();
  }

  // Function to toggle the language and update content accordingly
  function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'ar' : 'en';
    document.querySelectorAll('[data-en]').forEach(el => {
      el.innerText = el.getAttribute(`data-${currentLang}`);
    });

    document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';
    document.querySelector('input[name="lang"]').value = currentLang; // Update hidden input for language

    // Update the URL without refreshing the page
    const url = new URL(window.location.href);
    url.searchParams.set('lang', currentLang);
    window.history.pushState({}, '', url);
  }

  // Initialize the form to ensure the correct language is set
  document.addEventListener('DOMContentLoaded', function () {
    const urlParams = new URLSearchParams(window.location.search);
    currentLang = urlParams.get('lang');

    // If lang is undefined or not set, default to 'en'
    if (!currentLang || currentLang === 'undefined') {
      currentLang = 'en';
      const url = new URL(window.location.href);
      url.searchParams.set('lang', currentLang);
      window.history.replaceState({}, '', url);
    }

    document.querySelector('input[name="lang"]').value = currentLang; // Set the hidden field to the current language

    document.querySelectorAll('[data-en]').forEach(el => {
      el.innerText = el.getAttribute(`data-${currentLang}`);
    });

    document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';

    showQuestion(0);
    addRadioEventListeners();
  });
</script> -->

<script>
  let currentLang = 'en'; // Default language
  let currentQuestion = 0;
  const questions = document.querySelectorAll('.question-container');
  const progressBar = document.getElementById('progress-bar');

  // Update progress bar based on the current question
  function updateProgressBar() {
    const progress = ((currentQuestion + 1) / questions.length) * 100;
    progressBar.style.width = `${progress}%`;
  }

  // Show a specific question
  function showQuestion(index) {
    questions.forEach((question, i) => {
      question.classList.toggle('active', i === index);
    });
    updateProgressBar();
  }

  // Function to toggle between "Show More" and "Show Less"
  var charLimit = 80;

  var isTextExpanded = false;
  function setInitialText() {
  var fullTextEn = "PROMIS Physical Function instruments measure self-reported capability rather than actual performance of physical activities. This includes the functioning of one’s upper extremities (dexterity), lower extremities (walking or mobility), and central regions (neck, back), as well as instrumental activities of daily living, such as running errands.";
  var fullTextAr = "تقوم أدوات الوظيفة البدنية PROMIS بقياس القدرة المبلغ عنها ذاتيًا بدلاً من الأداء الفعلي للأنشطة البدنية. يتضمن ذلك أداء الأطراف العلوية (البراعة)، والأطراف السفلية (المشي أو الحركة)، والمناطق المركزية (الرقبة والظهر)، بالإضافة إلى الأنشطة الأساسية للحياة اليومية، مثل أداء المهمات.";
  
  var fullText = currentLang === 'en' ? fullTextEn : fullTextAr;
  var truncatedText = fullText.substring(0, charLimit);

  if (window.innerWidth < 724) {
    if (fullText.length > charLimit) {
      // Set truncated text with 'Show More' button
      document.getElementById("text").innerHTML = 
        truncatedText + 
        '<span id="dots">...</span>' +
        '<span id="more-text" style="display:none;">' + 
        fullText.substring(charLimit) + 
        '</span>' + 
        '<span id="toggle-btn" style="color: blue; cursor: pointer;">' + 
        (currentLang === 'en' ? ' Show More' : ' عرض المزيد') + 
        '</span>';

      // If the text was previously expanded, show it as expanded
      if (isTextExpanded) {
        document.getElementById("more-text").style.display = "inline";
        document.getElementById("dots").style.display = "none";
        document.getElementById("toggle-btn").innerHTML = (currentLang === 'en' ? ' Show Less' : ' إخفاء');
      }

      // Attach the event listener to the toggle button after it's created
      var toggleBtn = document.getElementById("toggle-btn");
      if (toggleBtn) {
        toggleBtn.addEventListener("click", toggleText);
      }
    } else {
      document.getElementById("text").innerHTML = fullText;
    }
  } else {
    document.getElementById("text").innerHTML = fullText;
  }
}

function toggleText() {
  var moreText = document.getElementById("more-text");
  var dots = document.getElementById("dots");
  var toggleBtn = document.getElementById("toggle-btn");

  if (moreText.style.display === "none") {
    moreText.style.display = "inline";
    dots.style.display = "none";
    toggleBtn.innerHTML = (currentLang === 'en' ? ' Show Less' : ' إخفاء');
    isTextExpanded = true;  // Store the state as expanded
  } else {
    moreText.style.display = "none";
    dots.style.display = "inline";
    toggleBtn.innerHTML = (currentLang === 'en' ? ' Show More' : ' عرض المزيد');
    isTextExpanded = false;  // Store the state as collapsed
  }
}

// Call the setInitialText function when the page loads
window.onload = setInitialText;

// Adjust text visibility when resizing the window
window.onresize = function() {
  setInitialText();
};

function adjustViewportForOrientation() {
    const metaViewport = document.querySelector('meta[name="viewport"]');
    if (window.matchMedia("(max-width: 1000px) and (orientation: landscape)").matches) {
      metaViewport.setAttribute("content", "width=device-width, initial-scale=1.0");
    } else {
      metaViewport.setAttribute("content", "width=device-width, initial-scale=1.0");
    }
  }

  // Adjust on page load
  adjustViewportForOrientation();

  // Adjust on orientation change
  window.addEventListener("resize", adjustViewportForOrientation);

  // Handle going to the next question
  function nextQuestion() {
    const currentInputs = questions[currentQuestion].querySelectorAll('input[type="radio"]');
    let answered = false;

    currentInputs.forEach(input => {
      if (input.checked) {
        answered = true;
      }
    });

    if (answered) {
      if (currentQuestion < questions.length - 1) {
        setTimeout(() => {
          currentQuestion++;
          showQuestion(currentQuestion);
        }, 500);
      }
    }
  }

  // Handle going to the previous question
  function previousQuestion() {
    if (currentQuestion > 0) {
      currentQuestion--;
      showQuestion(currentQuestion);
      addRadioEventListeners();
    }
  }

  // Add event listeners for radio buttons to move to the next question
  function addRadioEventListeners() {
    questions.forEach((question, questionIndex) => {
      const radioInputs = question.querySelectorAll('input[type="radio"]');
  
      radioInputs.forEach(input => {
        // Remove any existing event listener before adding a new one to avoid multiple triggers
        input.removeEventListener('click', handleRadioClick);
        input.addEventListener('click', handleRadioClick);
      });
    });
  }
  
  function handleRadioClick() {
    if (currentQuestion === questions.length - 1) {
      return; // Do nothing if we are on the last question
    }
    nextQuestion();
  }

  // Function to toggle the language and update content accordingly
  function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'ar' : 'en';
    document.querySelectorAll('[data-en]').forEach(el => {
      el.innerText = el.getAttribute(`data-${currentLang}`);
    });

    document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';
    document.querySelector('input[name="lang"]').value = currentLang; // Update hidden input for language

    // Update the URL without refreshing the page
    const url = new URL(window.location.href);
    url.searchParams.set('lang', currentLang);
    window.history.pushState({}, '', url);
    setInitialText();
  }

  // Initialize the form to ensure the correct language is set
  document.addEventListener('DOMContentLoaded', function () {
    const urlParams = new URLSearchParams(window.location.search);
    currentLang = urlParams.get('lang');

    // If lang is undefined or not set, default to 'en'
    if (!currentLang || currentLang === 'undefined') {
      currentLang = 'en';
      const url = new URL(window.location.href);
      url.searchParams.set('lang', currentLang);
      window.history.replaceState({}, '', url);
    }

    document.querySelector('input[name="lang"]').value = currentLang; // Set the hidden field to the current language

    document.querySelectorAll('[data-en]').forEach(el => {
      el.innerText = el.getAttribute(`data-${currentLang}`);
    });

    document.querySelector('.lang-toggle').innerText = currentLang === 'en' ? 'العربية' : 'English';

    showQuestion(0);
    addRadioEventListeners();
  });
</script>

</body>
</html>
